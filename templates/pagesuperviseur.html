{% extends 'base.html' %}
{% block content %}
{% load leaflet_tags %}
{% leaflet_js %}
{% leaflet_css %}
{% leaflet_map 'mapid' %}
<div class="container">
  
  <form method="POST">
    {% csrf_token %}
   
   <div class='col-6 rounded ' id="map" style="width: 1000px;height: 500px; box-sizing:border-box; margin-top: 20px;  border-radius: 50px;">
      <div class="leaflet-control">

      </div>

    </div>
   
<br><br>
<label for="lat">Latitude:</label>
            <input type="text" id="lat" name="Latitude">

            <label for="lng">Longitude:</label>
            <input type="text" id="lng" name="Longitude">

            <label for="lng">name:</label>
            <input type="text" id="lng" name="name">
    <button class="btn btn-dark  mx-auto d-block" style='  font-size: 15px; background-color: darkgreen;'> save node</button> 
  </form>

  
</div>



<script>
    var map = L.map('mapid').setView([37.215 ,10.12], 13);
    L.control.layers({
        
    'Satellite': L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 18,
        tileSize: 512,
        zoomOffset: -1,
        
    }),
    'Streets': L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    })
}).addTo(map);
var marker;

  map.on("click", function (e) {
    // If marker is already defined, remove it before adding a new one
    if (marker) {
      map.removeLayer(marker);
    }
    // Add new marker at double-clicked location
    marker = L.marker(e.latlng).addTo(map);
    document.getElementById("lat").value = e.latlng.lat;
    document.getElementById("lng").value = e.latlng.lng;
  });

    
    </script>
    
{% endblock %}